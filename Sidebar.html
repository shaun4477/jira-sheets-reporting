<?!= include('Sidebar.css') ?>

<div id="loading">
  <div id="loading-content">Loading ...</div>
</div>

<div id="jiraLogin">

  <button class="collapsible" id="jiraStatus">Log in to Jira</button>
  <div class="content">
    <div id="loginError" class="error"></div>
    <p>
      <label for="instance">Instance:</label>
      <input type="text" id="instance" value="<?= ctx.instance ?>">
    </p>
    <p>
      <label for="user">Username:</label>
      <input type="text" id="user" value="<?= ctx.user ?>">
    </p>
    <p>
      <label for="token">Token:</label>
      <input type="password" id="token" value="<?= ctx.token ?>">
    </p>
    <input type="submit" id="submitLogin" value="Update">
    <p>Instance is the name of the Jira instance shown in the browser navigation bar (e.g. 'XXX.jira.com' or 'YYY.atlassian.net').</p>
    <p>Username is often an email address.</p>
    <p>Tokens are created at <a target="_blank" href="https://id.atlassian.com/manage/api-tokens">https://id.atlassian.com/manage/api-tokens</a></p>
    
  </div>
  
</div>

<div id="reportRunner">

  
  <fieldset id="reportRunnerFields">
    <legend>Report Runner</legend>
    
    <p><input type="checkbox" id="delete_old" <?= report_defaults && report_defaults.delete_old ? "checked" : "" ?>>Delete old report sheets before running</p>
    <p>Report on <input type="text" id="sprint_count" value="<?= report_defaults && report_defaults.sprint_count ?  report_defaults.sprint_count : "1" ?>"> latest sprints</p>
    <p>
       <input type="checkbox" id="use_cache" <?= report_defaults && "use_cache" in report_defaults ? ( report_defaults.use_cache ? "checked" : "" ) : "checked" ?>>
       Speed up report using cached data where possible
    </p>
    <div id="boardListContainer">
      <button id="run" class="jiraButton">Run report</button><br>
      &nbsp;<br>
      <button id="refreshBoardList" class="jiraButton">Refresh board list</button><br>
      &nbsp;<br>
      Board(s) to report on:<br>
      <div id="reportError" class="error"></div>
      <div id="boardList">
      </div>
    </div>
  </fieldset>
  
</div>

<script>
var report_defaults = JSON.parse(<?= report_defaults ? JSON.stringify(report_defaults) : "{}" ?>);
</script>
<?!= include('Sidebar.js') ?>